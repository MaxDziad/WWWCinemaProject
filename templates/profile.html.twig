<link rel="stylesheet" href="/stylesheets/profile.css">
</head>


<div class="container-md">
    <div class="row mt-3">

        <!--Tab menu-->
        <div class="col-4">
            <div class="card">
                <div class="card-header">
                    Moje konto
                </div>
                <div class="btn-group-vertical tab" role="group" id="choose-card">
                    <button class="tab-links" onclick="pressTab(event, 'tickets')">Moje bilety</button>
                    <button class="tab-links" onclick="pressTab(event, 'account_info')">Zmień hasło</button>
                    <button class="tab-links" onclick="pressTab(event, 'private_info')">Zmień dane osobowe</button>
                    <button class="tab-links" onclick="pressTab(event, 'delete_account')">Usuń konto</button>
                </div>
            </div>
        </div>

        <!--My tickets tab-->
        <div class="tabcontent col-8" id="tickets">
            <div class="card" id="card-content">
                <div class="card-header">
                    Moje bilety
                </div>
                <div class="card-body my-3 mx-3">
                    <table class="table table-striped" id="cart-table">
                        <thead>
                        <tr>
                            <th scope="col">Lp.</th>
                            <th scope="col">TYTUŁ</th>
                            <th scope="col">DATA</th>
                            <th scope="col">GODZINA</th>
                        </tr>
                        </thead>
                        {% if iterate >= 1 %}
                            {% for i in 0..iterate-1 %}
                                <tbody>
                                <td>{{ i+1 }}</td>
                                <td>{{ title[i] }}</td>
                                <td>{{ date[i] }}</td>
                                <td>{{ time[i] }}</td>
                                </tbody>
                            {% endfor %}
                        {% else %}
                            <tbody>
                            <td colspan="4" class="no-tickets-info">BRAK BILETÓW</td>
                            </tbody>
                        {% endif %}
                    </table>
                </div>
            </div>
        </div>

        <!--Change password tab-->
        <div class="tabcontent col-8" id="account_info">
            <div class="card" id="card-content">
                <div class="card-header">
                    Zmień hasło
                </div>
                <div class="card-body ">
                    <form action="/profile" method="POST" class="">
                        <input id="chng-pswd-old" type="password" class="line" name="old_password"
                               placeholder="Aktualne hasło:">
                        <br>
                        <input id="chng-pswd-new" type="password" class="line" name="new_password"
                               placeholder="Nowe hasło:">
                        <br>
                        <input id="chng-pswd-rpt" type="password" class="line" name="repeat_password"
                               placeholder="Powtórz nowe hasło:">
                        <br>
                        <input id="submit-button1" type="submit" class="btn btn-success btn-lg">
                        <br>
                        {{ message }}
                    </form>
                </div>
            </div>
        </div>

        <!--Update personal data tab-->
        <div class="tabcontent col-8" id="private_info">
            <div class="card" id="card-content">
                <div class="card-header">
                    Zmień dane osobowe
                </div>
                <div class="card-text my-3 mx-3">
                    gjknljkgchjvbkjcghvjkb
                </div>
            </div>
        </div>

        <!--Delete account tab-->
        <div class="tabcontent col-8" id="delete_account">
            <div class="card" id="card-content">
                <div class="card-header">
                    Usuń konto
                </div>
                <div class="card-text my-3 mx-3">
                    gjknljkgchjvbkjcghvjkb
                </div>
            </div>

        </div>

    </div>
</div>

<script>

    document.getElementById("tickets").style.display = "block";

    function pressTab(evt, tab) {
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tab-links");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tab).style.display = "block";
        evt.currentTarget.className += " active";

        // var button = document.getElementById("submit-button1").onclick = pressTab(event, 'account_info');
    }
    if("{{ message }}"=="") {
        document.getElementById("submit-button1").onclick = alert("{{ message }}");
    }
</script>