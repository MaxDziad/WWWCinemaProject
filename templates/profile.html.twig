<link rel="stylesheet" href="/stylesheets/profile_style.css">
</head>


<div class="container-md">
    <div class="row mt-3">

        <!--Tab menu-->
        <div class="col-4">
            <div class="card">
                <div class="card-header">
                    <b>MOJE KONTO</b>
                </div>
                <div class="btn-group-vertical tab" role="group" id="choose-card">
                    <button class="tab-links" onclick="pressTab(event, 'tickets')">Moje bilety</button>
                    <button class="tab-links" onclick="pressTab(event, 'account_info')">Zmień hasło</button>
                    <button class="tab-links" onclick="pressTab(event, 'private_info')">Zmień dane osobowe</button>
                    <button class="tab-links" onclick="pressTab(event, 'delete_account')">Usuń konto</button>
                </div>
            </div>
        </div>

        <!--My tickets tab-->
        <div class="tabcontent col-8" id="tickets">
            <div class="card" id="card-content">
                <div class="card-header">
                    MOJE BILETY
                </div>
                <div class="card-body mx-3">
                    <table class="table table-striped" id="cart-table">
                        <thead>
                        <tr>
                            <th scope="col">Lp.</th>
                            <th scope="col">TYTUŁ</th>
                            <th scope="col">DATA</th>
                            <th scope="col">GODZINA</th>
                        </tr>
                        </thead>
                        {% if iterate >= 1 %}
                            {% for i in 0..iterate-1 %}
                                <tbody>
                                <td>{{ i+1 }}</td>
                                <td>{{ title[i] }}</td>
                                <td>{{ date[i] }}</td>
                                <td>{{ time[i] }}</td>
                                </tbody>
                            {% endfor %}
                        {% else %}
                            <tbody>
                            <td colspan="4" class="no-tickets-info">BRAK BILETÓW</td>
                            </tbody>
                        {% endif %}
                    </table>
                </div>
            </div>
        </div>

        <!--Change password tab-->
        <div class="tabcontent col-8" id="account_info">
            <div class="card" id="card-content">
                <div class="card-header">
                    ZMIEŃ HASŁO
                </div>
                <div class="card-body mx-3">
                    <form action="/profile" method="POST">
                        <input class="password_inputs" type="password" name="current_password" placeholder="Aktualne hasło">
                        <br>
                        <input class="password_inputs" type="password" name="change_password" placeholder="Nowe hasło">
                        <br>
                        <input class="password_inputs" type="password" name="change_password_repeat" placeholder="Powtórz nowe hasło">
                        <br>
                        <input type="submit" class="btn btn-success btn-lg" value="ZMIEŃ HASŁO">
                        <br>
                        {{ message_password }}
                    </form>
                </div>
            </div>
        </div>

        <!--Update personal data tab-->
        <div class="tabcontent col-8" id="private_info">
            <div class="card" id="card-content">
                <div class="card-header">
                    ZMIEŃ DANE OSOBOWE
                </div>
                <div class="card-body mx-3">
                    <form action="/profile" method="POST">
                        <input class="user_inputs" type="text" name="name" placeholder="Imię" value="{{ name }}">
                        <input class="user_inputs" type="text" name="surname" placeholder="Nazwisko" value="{{ surname }}">
                        <br>
                        <input class="user_inputs" type="text" name="address" placeholder="Ulica" value="{{ address }}">
                        <input class="user_inputs" type="text" name="address_cd" placeholder="Nr domu/lokalu" value="{{ address_cd }}">
                        <br>
                        <input class="user_inputs" type="text" name="postcode" placeholder="Kod pocztowy" value="{{ postcode }}">
                        <input class="user_inputs" type="text" name="city" placeholder="Miasto" value="{{ city }}">
                        <br>
                        <input class="user_inputs" type="text" name="email" placeholder="E-mail" value="{{ email }}">
                        <input class="user_inputs" type="text" name="phone_number" placeholder="Telefon" value="{{ phone_number }}">
                        <br>
                        <input type="submit" class="btn btn-success btn-lg" value="ZMIEŃ DANE">
                        <br>
                        {{ message_user }}
                    </form>
                </div>
            </div>
        </div>

        <!--Delete account tab-->
        <div class="tabcontent col-8" id="delete_account">
            <div class="card" id="card-content">
                <div class="card-header">
                    USUŃ KONTO
                </div>
                <div class="card-body mx-3">
                    <form action="/profile" method="POST">
                        <a>Usunięcie konta wymaga potwierdzenia hasłem.</a>
                        <br>
                        <input class="delete_input" type="password" name="password_confirm" placeholder="Aktualne hasło">
                        <br>
                        <input type="submit" class="btn btn-danger btn-lg" value="USUŃ KONTO">
                        <br>{{ message_delete }}
                    </form>
                </div>
            </div>

        </div>

    </div>
</div>

<script>

    document.getElementById("tickets").style.display = "block";

    function pressTab(evt, tab) {
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tab-links");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tab).style.display = "block";
        evt.currentTarget.className += " active";

        // var button = document.getElementById("submit-button1").onclick = pressTab(event, 'account_info');
    }

    {#if ("{{ message }}" == "") {#}
    //     document.getElementById("submit-button1").onclick = function () {
    //         var millisecondsToWait = 5000;
    //         setTimeout(function() {
    //             pressTab(event, 'account_info');
    //         }, millisecondsToWait);
    //     }
    // }
</script>